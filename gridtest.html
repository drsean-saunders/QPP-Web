<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QPP | Grid Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root { --cell: 80px; }
    html, body { height: 100%; }
    body { background: transparent; color: #ffffff; }
    .pixel-grid {
      position: fixed;
      inset: 0;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(var(--cell), var(--cell)));
      grid-auto-rows: var(--cell);
      z-index: 0; /* above gradient, below any content */
      pointer-events: none; /* let hover pass unless on cells */
    }
    .pixel {
      pointer-events: auto;
      transition: background-color .12s ease, box-shadow .12s ease;
      border-radius: 10px;
    }
    .pixel:hover {
      background-color: rgba(255,255,255,0.08);
    }
  </style>
  
</head>
<body>
  <div class="bg-grid"></div>
  <div id="pixel-grid" class="pixel-grid" aria-hidden="true"></div>
  <script>
    (function() {
      const root = document.documentElement;
      const grid = document.getElementById('pixel-grid');
      function getCellSize() {
        const raw = getComputedStyle(root).getPropertyValue('--cell').trim();
        const parsed = parseInt(raw || '80', 10);
        return isNaN(parsed) ? 160 : parsed;
      }
      function refill() {
        const size = getCellSize();
        const cols = Math.ceil(window.innerWidth / size);
        const rows = Math.ceil(window.innerHeight / size);
        const need = cols * rows;
        const have = grid.children.length;
        if (have > need) {
          while (grid.children.length > need) grid.removeChild(grid.lastChild);
        } else if (have < need) {
          const frag = document.createDocumentFragment();
          for (let i = have; i < need; i++) {
            const cell = document.createElement('div');
            cell.className = 'pixel';
            frag.appendChild(cell);
          }
          grid.appendChild(frag);
        }
      }
      window.addEventListener('resize', refill);
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', refill);
      } else {
        refill();
      }
    })();
  </script>
</body>
</html>
